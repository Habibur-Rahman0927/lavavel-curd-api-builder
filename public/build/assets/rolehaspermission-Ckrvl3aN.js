$(function(){let l=$("#routeData").data("url");var r=$(".yajra-datatable").DataTable({processing:!0,serverSide:!0,ajax:l,columns:[{data:"id",name:"id"},{data:"name",name:"name"},{data:"permissions",name:"action",render:function(e,t,n){return`<div><a href="#" class="view-permissions" data-toggle="modal" data-permissions='`+JSON.stringify(e)+"'>Show Permissions</a></div>"},orderable:!1,searchable:!1},{data:"action",name:"action",render:function(e,t,n){console.log(n);let a='<a href="/admin/rolehaspermission/'+n.id+'/edit" class="edit btn btn-success btn-sm">Edit</a>',s='<button class="delete btn btn-danger btn-sm" data-id="'+n.id+'">Delete</button>';return a+" "+s},orderable:!1,searchable:!1}],dom:'<"row"<"col-md-6"l><"col-md-6"f>>t<"row"<"col-md-5"i><"col-md-7"p>>',buttons:[{extend:"csv",text:"CSV",className:"btn btn-secondary"},{extend:"excel",text:"Excel",className:"btn btn-secondary"},{extend:"print",text:"Print",className:"btn btn-secondary"}],initComplete:function(){var e=$(".export-btn"),t=$(".dt-buttons").detach();e.after(t)}});$(".column-search").on("click",function(e){e.stopPropagation()}),$(".column-search").on("keyup change",function(){let e=$(this).parent().index();r.column(e).search(this.value).draw()}),$(".dropdown-menu").on("click","button",function(){var e=$(this).attr("id");switch(e){case"csvExport":r.button(".buttons-csv").trigger();break;case"excelExport":r.button(".buttons-excel").trigger();break;case"printExport":r.button(".buttons-print").trigger();break}}),$(document).on("click",".delete",function(){var e=$(this).data("id"),t=$(this).closest("tr");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&$.ajax({type:"POST",url:"/admin/rolehaspermission/"+e,data:{_method:"DELETE",_token:$('meta[name="csrf-token"]').attr("content")},success:function(a){a.status_code===200?(Swal.fire("Deleted!","The rolehaspermission has been deleted.","success"),r.row(t).remove().draw()):Swal.fire("Error!",a.message||"RoleHasPermission was not deleted.","error")},error:function(a){Swal.fire("Error!","There was an error deleting the rolehaspermission.","error")}})})}),$(document).on("click",".view-permissions",function(){let e=$(this).data("permissions"),t="";if(e.length>0){const n=e.length>=3?3:e.length>=2?2:e.length>=1?1:3,a=Math.ceil(e.length/n);t=`
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            ${Array(n).fill("").map((s,i)=>"<th>Permissions</th>").join("")}
                        </tr>
                    </thead>
                    <tbody>
                        ${Array(a).fill("").map((s,i)=>`<tr>${Array(n).fill("").map((h,d)=>{const m=i*n+d,o=e[m],u=c(o==null?void 0:o.name);return`<td>${o?`<i class="fas fa-check" style="color: green; margin-right:5px;"></i>${u}`:""}</td>`}).join("")}</tr>`).join("")}
                    </tbody>
                </table>
            `}else t="No Permissions Assigned";$("#permissionTableContainer").html(t),$("#permissionModal").modal("show")});function c(e){let t=e==null?void 0:e.replace(/[-.]/g," ");return t=t==null?void 0:t.replace(/([a-z])([A-Z])/g,"$1 $2"),t=t==null?void 0:t.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase()),t}});
