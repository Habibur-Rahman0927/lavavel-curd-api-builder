$(function(){let o=$("#routeData").data("url");var n=$(".yajra-datatable").DataTable({processing:!0,serverSide:!0,ajax:o,columns:[{data:"id",name:"id"},{data:"group_name",name:"group_name"},{data:"name",name:"name",render:function(t){return t.replace(/[-.]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},{data:"action",name:"action",render:function(t,e,r){let a='<a href="/admin/permission/'+r.id+'/edit" class="edit btn btn-success btn-sm">Edit</a>',s='<button class="delete btn btn-danger btn-sm" data-id="'+r.id+'">Delete</button>';return a+" "+s},orderable:!1,searchable:!1}],dom:'<"row"<"col-md-6"l><"col-md-6"f>>t<"row"<"col-md-5"i><"col-md-7"p>>',buttons:[{extend:"csv",text:"CSV",className:"btn btn-secondary"},{extend:"excel",text:"Excel",className:"btn btn-secondary"},{extend:"print",text:"Print",className:"btn btn-secondary"}],initComplete:function(){var t=$(".export-btn"),e=$(".dt-buttons").detach();t.after(e)}});$(".column-search").on("click",function(t){t.stopPropagation()}),$(".column-search").on("keyup change",function(){let t=$(this).parent().index();n.column(t).search(this.value).draw()}),$(".dropdown-menu").on("click","button",function(){var t=$(this).attr("id");switch(t){case"csvExport":n.button(".buttons-csv").trigger();break;case"excelExport":n.button(".buttons-excel").trigger();break;case"printExport":n.button(".buttons-print").trigger();break}}),$(document).on("click",".delete",function(){var t=$(this).data("id"),e=$(this).closest("tr");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&$.ajax({type:"POST",url:"/admin/permission/"+t,data:{_method:"DELETE",_token:$('meta[name="csrf-token"]').attr("content")},success:function(a){a.status_code===200?(Swal.fire("Deleted!","The permission has been deleted.","success"),n.row(e).remove().draw()):Swal.fire("Error!",a.message||"Permission was not deleted.","error")},error:function(a){Swal.fire("Error!","There was an error deleting the permission.","error")}})})})});
